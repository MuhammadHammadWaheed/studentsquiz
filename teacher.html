<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Teacher Portal</title>
</head>
<body>
<h1>Teacher Login</h1>
<input id="user" placeholder="Username">
<input id="pass" type="password" placeholder="Password">
<button id="login">Login</button>


<div id="portal" style="display:none;">
<h2>All Messages</h2>
<div id="allMessages"></div>
</div>


<script>
const API_BASE = 'http://localhost:3000';
const DEMO_USER = 'teacher';
const DEMO_PASS = 'teach123';


document.getElementById('login').addEventListener('click', async ()=>{
const u = document.getElementById('user').value.trim();
const p = document.getElementById('pass').value.trim();
if(u===DEMO_USER && p===DEMO_PASS){
document.getElementById('portal').style.display = 'block';
loadMessages();
} else {
alert('Invalid login');
}
});


async function loadMessages(){
const res = await fetch(API_BASE + '/api/messages');
const data = await res.json();
const box = document.getElementById('allMessages');
box.innerHTML = '';
data.reverse().forEach(m => {
const div = document.createElement('div');
div.style.border = '1px solid #ccc';
div.style.margin = '5px';
div.style.padding = '5px';
div.innerHTML = `<b>${m.name}</b> (${new Date(m.t).toLocaleString()})<br>${m.msg}`;
box.appendChild(div);
});
}
</script>
</body>
</html>
